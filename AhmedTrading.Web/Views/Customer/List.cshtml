@{
    ViewData["Title"] = "Customers";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

    <div class="m-md-3">
        <div class="card card-body">
            <div class="row">
                <div class="col justify-content-center align-self-center">
                    <h4 class="page-header mb-0">Customers</h4>
                </div>
                <div class="col text-right">
                    <a id="CreateClick" href="/Customer/Add" class="btn-floating blue-bg-btn" title="Add New">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </a>
                </div>
            </div>

            <table id="data-table" class="table table-sm table-bordered">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Mobile&nbsp;(Primary)</th>
                        <th>Address</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody id="t-body"></tbody>
            </table>
        </div>
    </div>

@section scripts{
    <script>
        $(function() {
            appendTable()
        });

        //append table data
        function appendTable() {
            axios.get('/Customer/CustomerList').then(response => {
                let html = '';
                response.data.forEach(row => {
                    html += `<tr>
                    <td class="text-left"><a class="blue-text" href="/Customer/Details/${row.CustomerId}">${row.CustomerName}</a></td>
                    <td>${row.PhonePrimary}</td>
                    <td class="text-left">${row.CustomerAddress ? row.CustomerAddress:''}</td>
                    <td><a class="fas fa-edit" href="/Customer/Update/${row.CustomerId}"></a></td</tr>`
                })

                //selector
                const tBody = document.getElementById('t-body');
                tBody.innerHTML = html;

                $("#individual-table").DataTable();
            })
        }
    </script>
}